<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
	<script src="js/app.js"></script>
	
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/app.css" />
		
    <script type="text/javascript" charset="utf-8">
      	mui.init();
      	mui('.mui-input-row input').input();
    </script>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
		<h1 class="mui-title my_title">登录</h1>
	</header>
	<div class="mui-content">
		<form class="mui-input-group">
			<div style="text-align: center; line-height: 200px;">
				<img src="images/qihoo.png" style="margin: 0 auto; vertical-align: middle;"" />
			</div>
			
		    <div class="my_input">
		        <label>用户名</label>
		    		<input id="account" type="text" placeholder="请输入手机号">
		    </div>
		    <div class="my_input">
		        <label>密码</label>
		        <input id="password" type="password" placeholder="请输入密码">
		    </div>
		    
		    <div class="link-area my_center">
		    		<a id='reg'>注册账号</a> 
		    		<a id='forgetPassword'>忘记密码</a>
			</div>
			<div style="text-align: center;">
				<button id="login" type="button" class="my_button">登陆</button>
			</div>
			
		</form>
	</div>
</body>
<script type="text/javascript">
	(function($, doc) {
		$.init({
			statusBarBackground: '#ff3333'
		});
		$.plusReady(function() {
//			plus.navigator.setStatusBarBackground('#FF0000');
			plus.screen.lockOrientation("portrait-primary");
			// close splash
			setTimeout(function() {
				//关闭 splash
				plus.navigator.closeSplashscreen();
			}, 600);
			//检查 "登录状态/锁屏状态" 结束
			var loginButton = doc.getElementById('login');
			var accountBox = doc.getElementById('account');
			var passwordBox = doc.getElementById('password');
			var regButton = doc.getElementById('reg');
			var forgetButton = doc.getElementById('forgetPassword');
			loginButton.addEventListener('tap', function(event) {
				var loginInfo = {
					account: accountBox.value,
					password: passwordBox.value
				};
				app.login(loginInfo, function(err) {
					if (err) {
						plus.nativeUI.toast(err);
						return;
					}
					toMain();
				});
			});
			regButton.addEventListener('tap', function(event) {
				$.openWindow({
					url: 'reg.html',
					id: 'reg',
					preload: true,
					show: {
						aniShow: 'pop-in'
					},
					styles: {
						popGesture: 'hide'
					},
					waiting: {
						autoShow: false
					}
				});
			}, false);
			forgetButton.addEventListener('tap', function(event) {
				$.openWindow({
					url: 'forget_password.html',
					id: 'forget_password',
					preload: true,
					show: {
						aniShow: 'pop-in'
					},
					styles: {
						popGesture: 'hide'
					},
					waiting: {
						autoShow: false
					}
				});
			}, false);
			//
			window.addEventListener('resize', function() {
				oauthArea.style.display = document.body.clientHeight > 400 ? 'block' : 'none';
			}, false);
			//
			var backButtonPress = 0;
			$.back = function(event) {
				backButtonPress++;
				if (backButtonPress > 1) {
					plus.runtime.quit();
				} else {
					plus.nativeUI.toast('再按一次退出应用');
				}
				setTimeout(function() {
					backButtonPress = 0;
				}, 1000);
				return false;
			};
		});
	}(mui, document));
</script>
</html>